const quizzes = {
  gk: [
    {
      imgquestion: "false",
      question: "1. Which country has the largest land area?",
      options: ["China", "Russia", "Canada", "United States"],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "2. What is the smallest ocean in the world?",
      options: [
        "Indian Ocean",
        "Southern Ocean",
        "Arctic Ocean",
        "Pacific Ocean",
      ],
      answer: 2,
    },
    {
      imgquestion: "true",
      imgurl: "img/canada flag.svg",
      question: "3. Identify the flag shown.",
      options: ["Australia", "UK", "Canada", "Denmark"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "4. Which is the tallest mountain in the world?",
      options: ["Mount Kilimanjaro", "Mount Elbrus", "Mount Everest", "K2"],
      answer: 2,
    },
    {
      imgquestion: "true",
      imgurl: "img/eiffel-tower-monochrome-masterpiece.png",
      question: "5. What is this landmark called?",
      options: [
        "Big Ben",
        "Eiffel Tower",
        "Leaning Tower of Pisa",
        "Empire State Building",
      ],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "6. What is the currency of Japan?",
      options: ["Won", "Yen", "Peso", "Ringgit"],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/istockphoto-1295031273-612x612-removebg-preview.png",
      question: "7. Which famous clock tower is this?",
      options: ["Times Square", "Leaning Tower", "Big Ben", "Clock Palace"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "8. Who wrote the national anthem of India?",
      options: [
        "Rabindranath Tagore",
        "Bankim Chandra Chattopadhyay",
        "Sarojini Naidu",
        "Subhas Chandra Bose",
      ],
      answer: 0,
    },
    {
      imgquestion: "true",
      imgurl: "img/Christ the Redeemer.png",
      question: "9. Identify the famous statue.",
      options: [
        "Christ the Redeemer",
        "Statue of Liberty",
        "The Thinker",
        "Buddha Statue",
      ],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "10. How many continents are there on Earth?",
      options: ["5", "6", "7", "8"],
      answer: 2,
    },
  ],

  science: [
    {
      imgquestion: "false",
      question: "1. What gas do plants absorb from the atmosphere?",
      options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "2. Who invented the telephone?",
      options: [
        "Thomas Edison",
        "Nikola Tesla",
        "Alexander Graham Bell",
        "Isaac Newton",
      ],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "3. What is H2O commonly known as?",
      options: ["Hydrogen", "Water", "Oxygen", "Salt"],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/leaf.png",
      question: "4. Identify the part of the plant shown in the image.",
      options: ["Root", "Stem", "Leaf", "Flower"],
      answer: 3,
    },
    {
      imgquestion: "false",
      question: "5. What is the boiling point of water at sea level?",
      options: ["90째C", "100째C", "110째C", "120째C"],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "6. What does 'www' stand for?",
      options: [
        "World Wide Web",
        "Wide Web World",
        "Web World Wide",
        "Web Wide World",
      ],
      answer: 0,
    },
    {
      imgquestion: "true",
      imgurl: "img/motherbord.png",
      question: "7. What electronic device is shown here?",
      options: ["Hard Disk", "Processor", "Motherboard", "RAM"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "8. Who proposed the law of gravity?",
      options: ["Einstein", "Newton", "Galileo", "Darwin"],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/orion.png",
      question: "9. Identify the constellation in the image.",
      options: ["Orion", "Ursa Major", "Cassiopeia", "Andromeda"],
      answer: 0,
    },
    {
      imgquestion: "false",
      question: "10. What does DNA stand for?",
      options: [
        "Deoxyribonucleic Acid",
        "Dynamic Nuclear Atom",
        "Data Network Algorithm",
        "Digital Nucleic Array",
      ],
      answer: 0,
    },
  ],
  history: [
    {
      imgquestion: "false",
      question: "1. Who was the first Prime Minister of India?",
      options: [
        "Mahatma Gandhi",
        "Sardar Patel",
        "Jawaharlal Nehru",
        "Subhas Chandra Bose",
      ],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "2. In which year did India gain independence?",
      options: ["1942", "1947", "1950", "1935"],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/tajmahal.png",
      question: "3. Identify the historical monument in the image.",
      options: ["Red Fort", "Qutub Minar", "Taj Mahal", "India Gate"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "4. Who was the first President of the United States?",
      options: [
        "Abraham Lincoln",
        "George Washington",
        "Thomas Jefferson",
        "John Adams",
      ],
      answer: 1,
    },
    {
      imgquestion: "false",
      question:
        "5. What was the name of the ship on which the Pilgrims traveled to America?",
      options: ["Titanic", "Mayflower", "Santa Maria", "Endeavour"],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/worldwar2.jpg",
      question: "6. Which war is depicted in this image?",
      options: ["World War I", "World War II", "Cold War", "Vietnam War"],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "7. Who discovered America?",
      options: [
        "Ferdinand Magellan",
        "Christopher Columbus",
        "Vasco da Gama",
        "Marco Polo",
      ],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/bhagat singh.png",
      question: "8. Identify the freedom fighter in the image.",
      options: [
        "Bhagat Singh",
        "Subhas Chandra Bose",
        "Mahatma Gandhi",
        "Sardar Patel",
      ],
      answer: 0,
    },
    {
      imgquestion: "false",
      question: "9. What empire did Ashoka belong to?",
      options: ["Gupta", "Maurya", "Mughal", "Chola"],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "10. When was the Battle of Plassey fought?",
      options: ["1757", "1857", "1764", "1800"],
      answer: 0,
    },
  ],
  sport: [
    {
      imgquestion: "false",
      question: "1. How many players are there in a cricket team?",
      options: ["9", "10", "11", "12"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "2. Who has won the most Olympic gold medals?",
      options: ["Usain Bolt", "Michael Phelps", "Carl Lewis", "Mark Spitz"],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "3. Which country won the FIFA World Cup in 2022?",
      options: ["France", "Germany", "Brazil", "Argentina"],
      answer: 3,
    },
    {
      imgquestion: "true",
      imgurl: "img/tennis.png",
      question: "4. Identify the sport in the image.",
      options: ["Tennis", "Baseball", "Basketball", "Football"],
      answer: 0,
    },
    {
      imgquestion: "false",
      question: "5. In which sport is the term 'love' used?",
      options: ["Cricket", "Tennis", "Hockey", "Boxing"],
      answer: 1,
    },
    {
      imgquestion: "true",
      imgurl: "img/sachin.jpeg",
      question: "6. Which cricket player is shown in the image?",
      options: ["Virat Kohli", "MS Dhoni", "Sachin Tendulkar", "Rohit Sharma"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "7. What is the national sport of Japan?",
      options: ["Karate", "Judo", "Sumo Wrestling", "Baseball"],
      answer: 2,
    },
    {
      imgquestion: "false",
      question: "8. Which country has hosted the Olympics the most times?",
      options: ["USA", "France", "UK", "China"],
      answer: 0,
    },
    {
      imgquestion: "true",
      imgurl: "img/tennis-recket.png",
      question: "9. Identify the sports equipment shown here.",
      options: [
        "Badminton Racket",
        "Tennis Racket",
        "Hockey Stick",
        "Baseball Bat",
      ],
      answer: 1,
    },
    {
      imgquestion: "false",
      question: "10. Who holds the record for the fastest 100m sprint?",
      options: ["Tyson Gay", "Yohan Blake", "Usain Bolt", "Justin Gatlin"],
      answer: 2,
    },
  ],
};

// Get topic from URL (passed by index.html as ?topic=math)
function getTopic() {
  const params = new URLSearchParams(window.location.search);
  return params.get("topic") || "gk";
}

let currentQuiz = [];
let currentQuestion = 0;
var score = 0;

function loadQuiz() {
  const topic = getTopic();
  currentQuiz = quizzes[topic] || quizzes["gk"];
  document.getElementById("quiz-title").textContent = ` ${
    topic.charAt(0).toUpperCase() + topic.slice(1)
  } Quiz`;
  currentQuestion = 0;
  score = 0;
  document.getElementById("result-container").classList.add("d-none");
  document.getElementById("quiz-container").classList.remove("d-none");
  showQuestion();
}

function showQuestion() {
  document.querySelector(".question-total").textContent = `${
    currentQuestion + 1
  } - ${currentQuiz.length}`;
  const q = currentQuiz[currentQuestion];
  document.getElementById("question-container").textContent = q.question;
  if (q.imgquestion === "true") {
    document.getElementById("img-container").classList.remove("d-none");
    console.log(q.imgurl);

    document.getElementById("que-img").src = q.imgurl;
  } else {
    document.getElementById("img-container").classList.add("d-none");
  }
  const optionsContainer = document.getElementById("options-container");
  optionsContainer.innerHTML = "";
  q.options.forEach((opt, idx) => {
    const btn = document.createElement("button");
    btn.className = "btn btn-outline-secondary m-1 option-btn";
    btn.textContent = opt;
    btn.onclick = () => selectOption(idx);
    optionsContainer.appendChild(btn);
  });
  document.getElementById("next-btn").disabled = true;
  // document.getElementById('next-btn').style.cursor = 'not-allowed';
}

function selectOption(selectedIdx) {
  const q = currentQuiz[currentQuestion];
  const optionBtns = document.querySelectorAll(".option-btn");
  optionBtns.forEach((btn, idx) => {
    if (idx === q.answer) btn.classList.add("btn-success");
    if (idx === selectedIdx && idx !== q.answer)
      btn.classList.add("btn-danger");
    btn.disabled = true;
    // btn[disabled].style.backgroundColor = 'gray';
  });
  if (selectedIdx === q.answer) score++;
  document.getElementById("next-btn").disabled = false;
}

document.getElementById("next-btn").addEventListener("click", () => {
  if (currentQuestion < currentQuiz.length) {
    document.getElementById("btn-audio").play();
    console.log("Button clicked");
  }
  currentQuestion++;
  if (currentQuestion < currentQuiz.length) {
    showQuestion();
  } else {
    showResult();
  }
});

function showResult() {
  if (score >= currentQuiz.length / 3) {
    document.getElementById("result-audio").play();
    document.querySelector(".confetti").classList.remove("d-none");
  } else {
    document.getElementById("lose-audio").play();
  }
  document.getElementById("quiz-container").classList.add("d-none");
  document.getElementById("result-container").classList.remove("d-none");

  let crrscore = 0;
  let addscore = setInterval(() => {
    if (crrscore == score) {
      console.log("Interval cleared");
      clearInterval(addscore);
    } else if (crrscore <= 9) {
      crrscore += 1;
      document.getElementById("score").textContent = "0" + crrscore;
    } else {
      crrscore += 1;
      document.getElementById("score").textContent = crrscore;
    }
  }, 200);
  document.getElementById("totalscore").textContent = currentQuiz.length;
}

document.getElementById("retry-btn").addEventListener("click", loadQuiz);

// Initialize quiz on page load
window.onload = loadQuiz;
